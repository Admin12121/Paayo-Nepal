# ==========================================================================
# Paayo Nepal — Environment Variables
#
# Copy this file to `.env` and fill in the values.
#
#   cp .env.example .env
#
# For local development (docker compose --profile local), the defaults
# below are sufficient — they match the docker-compose.yml defaults.
#
# For production (docker compose --profile prod), you MUST override every
# variable marked "REQUIRED in prod" with a strong, unique value.
# ==========================================================================

# --------------------------------------------------------------------------
# PostgreSQL
# --------------------------------------------------------------------------
DATABASE_NAME=tourism
DATABASE_USER=tourism
# REQUIRED in prod — use a strong random password
DATABASE_PASSWORD=tourism_dev_password
# Host port for the local profile (ignored in prod)
POSTGRES_PORT=5432

# --------------------------------------------------------------------------
# Redis
# --------------------------------------------------------------------------
# REQUIRED in prod — use a strong random password
REDIS_PASSWORD=redis_dev_password
# Max memory Redis is allowed to use
REDIS_MAX_MEMORY=256mb
# Host port for the local profile (ignored in prod)
REDIS_PORT=6379

# --------------------------------------------------------------------------
# Backend (Rust / Axum)
# --------------------------------------------------------------------------
# DATABASE_URL is constructed in docker-compose.yml from the variables above.
# For local (non-Docker) dev, set it explicitly:
# DATABASE_URL=postgres://tourism:tourism_dev_password@localhost:5432/tourism
# REDIS_URL=redis://:redis_dev_password@localhost:6379

DATABASE_MAX_CONNECTIONS=20
DATABASE_MIN_CONNECTIONS=5

# Upload / image processing
MAX_UPLOAD_SIZE=52428800
MAX_IMAGE_WIDTH=1920
THUMBNAIL_WIDTH=400

# CORS — comma-separated origins
CORS_ALLOWED_ORIGINS=http://localhost:3000

# Admin seed account — created on first startup
ADMIN_EMAIL=admin@paayonepal.com
# REQUIRED in prod — use a strong password
ADMIN_PASSWORD=admin@#12
ADMIN_NAME=Admin

# REQUIRED in prod — use a long random string (>= 32 chars)
VIEWER_HASH_SALT=dev-salt-change-in-production-32ch

# Logging level (Rust tracing filter)
RUST_LOG=tour_backend=debug,tower_http=debug

# Uncomment to allow plain-HTTP CSRF cookies during local development
# (not needed when running behind HTTPS / Nginx with TLS)
# CSRF_INSECURE_DEV=1

# --------------------------------------------------------------------------
# Frontend (Next.js / BetterAuth)
# --------------------------------------------------------------------------
# Public URL the app is served from (used for absolute URLs, OG tags, etc.)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# REQUIRED in prod — use a long random secret (>= 32 chars)
BETTER_AUTH_SECRET=dev-secret-change-in-production

# WebAuthn / Passkeys
PASSKEY_RP_ID=localhost

# Google OAuth (optional — leave blank to disable)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# --------------------------------------------------------------------------
# Nginx (prod profile only)
# --------------------------------------------------------------------------
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
